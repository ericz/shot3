<html>
<head>

<script src="http://cdn.sockjs.org/sockjs-0.1.2.min.js"></script>
<script src="/js/bridge.js"></script>

<script>

//var bridge = new Bridge({url: 'http://ec2-50-19-181-20.compute-1.amazonaws.com:8080/now'});
var bridge = new Bridge({url: 'http://localhost:8091/bridge'});
// var name = prompt('Name?');
var name = "someone";

var lobby;

var handler = {
  msg: function(name, message) {
    console.log(name + ': ' + message);
  }
};

bridge.ready(function(){
  var chat = bridge.getService('chatserver', function(chat){
    console.log('chat found');
    chat.join('lobby', handler, function() {
      bridge.getChannel('lobby', function(channel) {
        console.log('got lobby');
        lobby = channel;
      });
    });
  });
});

function send(message) {
  lobby.msg(name, message);
}

</script>


</head>

<body>
</body>

</html>
